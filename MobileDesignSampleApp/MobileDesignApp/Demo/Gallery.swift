//
// Gallery.swift
//
// Copyright ¬© 2023 New Media Group. All rights reserved.
//

// import SwiftUI
import MobileDesign
import AVKit
import SwiftUI

struct VimeoPreview: View {
    @State var playbackStateModel = PlaybackStateModel(playbackState: .INIT)
    var body: some View {
        TVPOC(url: "https://player.vimeo.com/external/831404478.m3u8?s=cc3eadec75b090dcf038f24184dfe6d52e936a3f&logging=false") { _ in
            VideoPlayerControlAVPlayer(
                VideoPlayerSource(
                    videoURL: "https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8",
                    title: "Áç®ÂÆ∂Â∞àË®™ÔΩúÁî®ÁßëÊäÄÈ°õË¶ÜÈáëËûç ÊùéÂ∞èÂä†Èù©Êñ∞Â∞èÂ∫óÊäïË≥áÊ®°Âºè",
                    imageURL: "https://placehold.co/1920x1080/png",
                    headline: "Áç®ÂÆ∂Â∞àË®™ÔΩúÁî®ÁßëÊäÄÈ°õË¶ÜÈáëËûç ÊùéÂ∞èÂä†Èù©Êñ∞Â∞èÂ∫óÊäïË≥áÊ®°Âºè",
                    leadingFootnote: "Êª¥ÁÅåÈÄö‰∏ªÂ∏≠ÊùéÂ∞èÂä†Â∞±ÊÉ≥Âà∞‰∫ÜÁ†¥Ëß£ÊñπÊ°àÔºåÂÖºÈñãÁôºÂá∫Ë§áÂà©ÁîüË≤°ÁöÑÊäïË≥áÊ®°ÂºèÔºåÊúâÂ¶ÇÂ§™Ê•µÁîüÂÖ©ÂÑÄ„ÄÅÂÖ©ÂÑÄÁîüÂõõË±°„ÄÇËñëÊòØËÄÅÁöÑËæ£Ôºå61Ê≠≤ÁöÑ‰ªñ‰∏ãÊµ∑ÂâµÊ•≠ÔºåÊääÁîüÊÑèÁ∂ìÁöÑÁÆóÁõ§Êï≤ÂæóÊõ¥ÁÇ∫ÈüøÂôπÂôπ„ÄÇÊª¥ÁÅåÈÄö‰∏ªÂ∏≠ÊùéÂ∞èÂä†Â∞±ÊÉ≥Âà∞‰∫ÜÁ†¥Ëß£ÊñπÊ°àÔºåÂÖºÈñãÁôºÂá∫Ë§áÂà©ÁîüË≤°ÁöÑÊäïË≥áÊ®°ÂºèÔºåÊúâÂ¶ÇÂ§™Ê•µÁîüÂÖ©ÂÑÄ„ÄÅÂÖ©ÂÑÄÁîüÂõõË±°„ÄÇËñëÊòØËÄÅÁöÑËæ£Ôºå61Ê≠≤ÁöÑ‰ªñ‰∏ãÊµ∑ÂâµÊ•≠ÔºåÊääÁîüÊÑèÁ∂ìÁöÑÁÆóÁõ§Êï≤ÂæóÊõ¥ÁÇ∫ÈüøÂôπÂôπ„ÄÇ",
                    secondFootnote: "",
                    id: 1,
                    videoType: ""
                ),
                playbackStateModel: playbackStateModel
            ) {
                EmptyView()
            }
            //                        CustomVideoPlayer(player: AVPlayer(url: URL(string: $0)!))
            //                        VideoPlayerControlAVPlayer(source)
        }
    }
}

struct VideoPlayerView: UIViewControllerRepresentable {
    var videoURL: URL
    func makeUIViewController(context: Context) -> AVPlayerViewController {
        let player = AVPlayer(url: videoURL)
        let playerController = AVPlayerViewController()
        playerController.player = player
        player.play()
        return playerController
    }
    func updateUIViewController(_ uiViewController: AVPlayerViewController, context: Context) {}
}

struct Gallery: View {
    var data = [
        MenuItem(
            name: "Video",
            content: {
                AnyView(
                    VideoPlayerView(videoURL: URL(string: "https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8")!)
                        .frame(height: 300)
                )
            }),
        MenuItem(
            name: "Â±ØÈñÄ33Âπ¥Êº´Áï´Â∞èÂ∫ó",
            content: {
                AnyView(
                    TVPOC(url: "kXaRg6wUYK8") { url in
                        YoutubePlayerView(isAutoplay: true) {
                            $0.load(withVideoId: url)
                        }
                    }
                )
            }),
        MenuItem(
            name: "T21 ÁôºÊòé‰∫∫ÁõßÁÖúÊòé",
            content: {
                AnyView(
                    TVPOC(url: "NEpgCftIYmQ") { url in
                        YoutubePlayerView(isAutoplay: true) {
                            $0.load(withVideoId: url)
                        }
                    }
                )
            }),

        MenuItem(
            name: "Vimeo",
            content: {
                AnyView(
                    VimeoPreview()
                )
            }),
        MenuItem(
            name: "ReelsPOC",
            content: {
                AnyView(
                    ReelsPOC()
                )
            }),

        MenuItem(
            name: "Colors",
            content: {
                AnyView(ColorPaletteDemo())
            }),
        MenuItem(
            name: "Fonts",
            content: {
                AnyView(FontsDemo())
            }),
        MenuItem(
            name: "CardView",
            content: {
                AnyView(CardViewGallery())
            }
        ),
        MenuItem(
            name: "ChipGroup",
            content: {
                AnyView(ChipGroupDemo(index: 0))
            }
        )
    ]

    var body: some View {
        NavigationView(content: {
            List {
                ForEach(data) { item in
                    NavigationLink(
                        destination: item.content,
                        label: {
                            Text(item.name)
                        })

                }

                .navigationBarTitle(Text("NMG Mobile Design Library üèõÔ∏è"), displayMode: .inline)
                .navigationBarTitleDisplayMode(.inline)
            }

        })
    }
}

struct Gallery_Previews: PreviewProvider {
    static var previews: some View {
        Gallery().environmentObject(ThemeManager.shared)
    }
}
